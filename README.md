# ü§ñ Telegram Bot ‚Äî –°—Ç–∞—Ç—å–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

### üìã –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç Telegram-–±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏.  
- üì• –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–º—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.  
- üóÇ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ SQLite.  
- üìÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—å–∏ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.  
- üîÑ –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ –ë–î (`articles` —Ç–∞–±–ª–∏—Ü–∞).  

---

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
telegramx/
‚îú‚îÄ‚îÄ bot.py                # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
‚îú‚îÄ‚îÄ database.py           # –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ —Å –ë–î
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .env                  # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ articles.json     # –°—Ç–∞—Ç—å–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ë–î
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start_handler.py  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
‚îÇ   ‚îú‚îÄ‚îÄ article_handler.py # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
‚îú‚îÄ‚îÄ venv/                 # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```

---

### ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É:
   ```bash
   git clone https://github.com/—Ç–≤–æ–π_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/telegramx.git
   cd telegramx
   ```

2. –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º:
   ```bash
   python -m venv venv
   venv\Scripts\activate  # Windows
   source venv/bin/activate  # Linux/Mac
   ```

3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

4. –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `.env` –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω:
   ```
   TELEGRAM_BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
   ```

5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ë–î –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç—å–∏:
   ```bash
   python database.py
   ```

---

### üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python bot.py
```

---

### üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞—Ç–µ–π
- –§–æ—Ä–º–∞—Ç —Å—Ç–∞—Ç–µ–π –≤ `data/articles.json`:
   ```json
   [
       {"title": "–°—Ç–∞—Ç—å—è 1", "content": "–≠—Ç–æ –ø–µ—Ä–≤–∞—è —Å—Ç–∞—Ç—å—è.", "send_after_days": 0},
       {"title": "–°—Ç–∞—Ç—å—è 2", "content": "–≠—Ç–æ –≤—Ç–æ—Ä–∞—è —Å—Ç–∞—Ç—å—è.", "send_after_days": 2}
   ]
   ```

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç–∞—Ç–µ–π:
   1. –û–±–Ω–æ–≤–∏ `articles.json`.  
   2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ `database.py`:
      ```bash
      python database.py
      ```

---

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`requirements.txt`)
```
python-telegram-bot>=20.0
python-dotenv
APScheduler
```

---

### üõ° –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è
1. **–û—à–∏–±–∫–∞: `This event loop is already running`**
   - –ü—Ä–∏—á–∏–Ω–∞: VS Code –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π `event loop`.
   - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω `nest_asyncio` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

2. **–û—à–∏–±–∫–∞: `ON CONFLICT clause does not match`**
   - –ü—Ä–∏—á–∏–Ω–∞: `telegram_id` –Ω–µ –±—ã–ª `UNIQUE`.
   - –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—É `users` —Å `UNIQUE`.

---

### üõ† –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
1. –°–∫—Ä–∏–ø—Ç `start_bot.sh`:
   ```bash
   #!/bin/bash
   source venv/bin/activate
   nohup python bot.py > bot.log 2>&1 &
   ```

2. –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `crontab`:
   ```bash
   @reboot /path/to/telegramx/start_bot.sh
   ```

---

### üñ• –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–Ø–∑—ã–∫:** Python 3.10+  
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:** `python-telegram-bot`, `APScheduler`, `sqlite3`  
- **–ë–î:** SQLite (–ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)  

---

### üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **–ê–≤—Ç–æ—Ä:** –ò–ª—å—è  
- **Telegram:** [@—Ç–≤–æ–π_–Ω–∏–∫](https://t.me/—Ç–≤–æ–π_–Ω–∏–∫)  
- **GitHub:** [—Ç–≤–æ–π_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/—Ç–≤–æ–π_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

---

üî• **–ì–æ—Ç–æ–≤–æ! –ï—Å–ª–∏ –±—É–¥—É—Ç –≤–æ–ø—Ä–æ—Å—ã ‚Äî –ø–∏—à–∏!** üòé
